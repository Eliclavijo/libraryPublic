pipeline {
  agent {
    label "php"
  }

  stages {
    stage('Build') {
      steps {
        echo "[STAGE] Build"
        sh "composer install"
      }
    }

    stage('SonarQube') {
      steps {
        echo "[STAGE] SonarQube"
        sh "sonar-scanner -Dsonar.projectKey=my-project -Dsonar.projectVersion=1.0.0 -Dsonar.sources=src/"
      }
    }
  }
}
